@Library(value='pipeline-library@master', changelog=false)
import com.genesys.jenkins.Service
 
final serviceBuild = new Service()



pipeline {

    agent { label 'dev_v2' }

    tools {
        jdk 'OpenJDK 17.0.4'
    }
      environment {
        GITHUB_TOKEN = credentials("GITHUB_TOKEN_KB")

    }

    stages {
         
        stage("display repositories") {
            steps {

             sh "ls -alh"
            }
        }

          
        stage("build") {
            steps {
            sh "sh ./jenkins/commands.sh ${GITHUB_TOKEN} passed_message"
            sh "ls -alh"
            dir('public') {
                sh "ls -alh"
                }
            dir('public/docs') {
                sh "ls -alh"
                }
            }

        }

                 
        stage("post-build") {
            steps {
                 sh "ls -alh"

                echo 'Starting the build Stage'
            }
        }

    }

}